build: off

platform:
- x64

before_build:
- curl -ostack.tar.gz -L https://www.stackage.org/stack/windows-x86_64
- 7z x stack.tar.gz -so | 7z x -si -ttar
- ps: cp stack-*/stack.exe .

skip_tags: true

build_script:
- stack setup --no-terminal > nul
- stack build --only-snapshot --no-terminal
- stack --local-bin-path . install jira2sheet

test_script:
- echo "" | stack --no-terminal test

artifacts:
- path: jira2sheet.exe

deploy:
  - provider: GitHub
    auth_token:
      secure: 6Oc+Fqo5z24D/XvNXI5G9kKXQczkmgcqLUULwo7maviGXWcfOQIkinQJSulnIq+E
    artifact: jira2sheet.exe
    on:
      branch: master

